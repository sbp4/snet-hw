# Домашнее задание к занятию "4.6. VPN"

---

### Задание 1. 

Как вы думаете, если вы пользуетесь коммерческим VPN сервисом для доступа к заблокированным сайтам по протоколу TLS, является ли передаваемая информация полностью защищённой?

*Приведите ответ в свободной форме.*

***Ответ:***

Если использовать коммерческий VPN сервис для доступа к заблокированным сайтам по протоколу TLS, то передаваемая информация будет полностью защищённой. Так как протокол TLS даёт возможность клиент-серверным приложениям осуществлять связь в сети таким образом, что нельзя производить прослушивание пакетов и осуществить несанкционированный доступ. Как только клиент и сервер договорились об использовании TLS, они устанавливают защищённое соединение. Это делается с помощью процедуры подтверждения связи. Во время этого процесса клиент и сервер принимают соглашение относительно различных параметров, необходимых для установки безопасного соединения. Как только процедура подтверждения связи завершена, между клиентом и сервером устанавливается безопасное соединение. Данные, передаваемые по нему, шифруются и расшифровываются с использованием симметричной криптосистемы до тех пор, пока соединение не будет завершено.

Но это идеальная ситуация в идеальном мире, где все настроено идеально. 

Однако, бывают случаи, когда что-то может пойти не так. К примеру, коммерческий VPN под названием NordVPN был скомпрометирован в 2018 году. Их приватные ключи (в том числе OpenVPN и для сертификата официального сайта компании) были похищены и публично доступны в интернете. На сегодня срок действия сертификата уже истек. Он были валиден до октября 2018 года. Но до его истечения, а ключи были похищены в марте 2018, злоумышленники могли создать копию сайта, выдающего себя за NordVPN. И использовать ключи, например, для организации MitM-атак ("человек посередине") и «прослушивания» зашифрованных соединений. Компроментация NordVPN стала возможной, так как сотрудники компании не заблокировали интерфейс удаленного управления сервером на хостинге провайдера, о котором прекрасно знали и даже использовали. Эта уязвимость позволила хакерам получить root-доступ к серверу и похитить сертификат. 

Если подключение идет из другой страны, сертификат источника будет заменен на сертификат VPN-сервера.

---

### Задание 2. 

Какой протокол VPN вы выберете для подключения к VPN серверу изнутри локальной сети, в которой открыт доступ наружу только по протоколам HTTP и HTTPS?

*Приведите ответ в свободной форме.*

***Ответ:***

Для подключения к VPN серверу изнутри локальной сети, в которой открыт доступ только по протоколам HTTP и HTTPS можно использовать протокол OpenVPN (основанный на SSL/TLS). Кроме него еще можно использовать SSL/TLS и SSTP, так как все перечисленные протоколы, включая OpenVPN, используют 443 порт. Он открывается для соединения по протоколу HTTPS. 

---

### Задание 3. 

Какой тип VPN вы бы использовали для подключения 100 пользователей к серверам, находящимся в центральном офисе. Объясните ваше решение.

*Приведите ответ в свободной форме.*

***Ответ:***

Для подклчюения 100 пользователей к серверам, находящимся в ЦО, я бы использовал SSL VPN. Данный тип VPN позволяет подключаться к VPN серверу компании с использованием шифрования и авторизации. Пользователи, в данном случае, получают доступ <del>к своему рабочему столу и всем необходимым сетевым ресурсам компании</del> к web-интерфейсу, который позволяет предоставить безопасный доступ сотрудникам компании к внутренним веб-ресурсам, серверам SSH и серверам терминальных служб без необходимости установки специального клиента VPN, используя только протокол HTTPS. Подключение осуществляется через web-браузер. Работать можно с любого компьтера.

Второй вариант, который можно использовать - это Remote Access VPN (модель клиент-сервер). Для создания туннелей используется протокол Layer 2 Tunnelling Protocol (L2TP), а для защиты передаваемых данных - протокол IPSec. В этому варианте необходима установка дополнительного ПО на компьютер пользователя. Подключение осуществляется через дополнительное ПО. Работать можно только с компьютера, на котором установлен VPN-клиент.

---


**

## Дополнительные задания (со звездочкой*)
Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.


### Задание 4. 

**Симметричное шифрование (одинаковый ключ на зашифровку и расшифровку).**

Создайте 2 виртуальных машины. При необходимости можете использовать приложенный файл [Vagrantfile](https://github.com/netology-code/snet-homeworks/blob/main/4-06-Vagrantfile)

Создайте файл `secret` на компьютере netology1

```
root@netology1:~# echo 'This is Netology DEVSYS course InfoSec webinar' > secret
```

Зашифруйте файл `secret` в файл `secret.encrypted`, введя ключ.

```
root@netology1:~# gpg --output secret.encrypted --symmetric --cipher-algo AES256 secret
```

На машине **netology2** запустите утилиту `netcat` на порту 5000 (от root'a) и сохраните то, что будет передано в порт 5000, сохраните в файл secret-new.encrypted

```
root@netology2:~# nc -l -p 5000 -q 1 > secret-new.encrypted < /dev/null
```

На машине **netology1** отправьте файл `secret.encrypted` на адрес `172.28.128.60` на порт `5000`

```
root@netology1:~# cat secret.encrypted | nc 172.28.128.60 5000
```

На машине **netology2** расшифруйте файл из `secret-new.encrypted` в `secret-new`

```
root@netology2:~# gpg --output secret-new --decrypt secret-new.encrypted
```

В качестве ответа приведите вывод 2-х команд с хоста **netology2**, куда вы передали файл:
```
cat secret-new.encrypted
cat secret-new
```

***Ответ:***

Выводы всех команд на скринах ниже:

<a href="https://ibb.co/S5WTVZx"><img src="https://i.ibb.co/ckM52sv/4-1.png" alt="4-1" border="0"></a>

<a href="https://ibb.co/2ZDtpvn"><img src="https://i.ibb.co/NT8jG9V/4-2.png" alt="4-2" border="0"></a>